var background=(function(){"use strict";function c(e){return e==null||typeof e=="function"?{main:e}:e}const i=c(()=>{console.log("Background script started with WXT!"),chrome.action.onClicked.addListener(e=>{console.log("Extension icon clicked"),e.id&&chrome.tabs.sendMessage(e.id,{type:"ACTIVATE_OVERLAY"}).catch(o=>console.error("Failed to send message:",o))}),chrome.commands.onCommand.addListener(e=>{console.log("Keyboard shortcut pressed:",e),e==="activate-overlay"&&chrome.tabs.query({active:!0,currentWindow:!0},([o])=>{o?.id&&chrome.tabs.sendMessage(o.id,{type:"ACTIVATE_OVERLAY"}).catch(n=>console.error("Failed to send message:",n))})}),chrome.runtime.onMessage.addListener((e,o,n)=>(console.log("Background received message:",e.type),e.type==="CAPTURE_SCREENSHOT"?(chrome.tabs.captureVisibleTab({format:"png"}).then(s=>{n(s)}).catch(s=>{console.error("Screenshot failed:",s),n(null)}),!0):!1))});function l(){}globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;function r(e,...o){}const a={debug:(...e)=>r(console.debug,...e),log:(...e)=>r(console.log,...e),warn:(...e)=>r(console.warn,...e),error:(...e)=>r(console.error,...e)};let t;try{t=i.main(),t instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw a.error("The background crashed on startup!"),e}return t})();
