var background=(function(){"use strict";function c(e){return e==null||typeof e=="function"?{main:e}:e}const i=c(()=>{console.log("Background script started with WXT!"),chrome.action.onClicked.addListener(e=>{console.log("Extension icon clicked"),e.id&&chrome.tabs.sendMessage(e.id,{type:"ACTIVATE_OVERLAY"}).catch(o=>console.error("Failed to send message:",o))}),chrome.commands.onCommand.addListener(e=>{console.log("Keyboard shortcut pressed:",e),e==="activate-overlay"&&chrome.tabs.query({active:!0,currentWindow:!0},([o])=>{o?.id&&chrome.tabs.sendMessage(o.id,{type:"ACTIVATE_OVERLAY"}).catch(r=>console.error("Failed to send message:",r))})}),chrome.runtime.onMessage.addListener((e,o,r)=>(console.log("Background received message:",e.type),e.type==="CAPTURE_SCREENSHOT"?(chrome.tabs.captureVisibleTab({format:"png"}).then(s=>{r(s)}).catch(s=>{console.error("Screenshot failed:",s),r(null)}),!0):!1))});function l(){}globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;function n(e,...o){if(typeof o[0]=="string"){const r=o.shift();e(`[wxt] ${r}`,...o)}else e("[wxt]",...o)}const a={debug:(...e)=>n(console.debug,...e),log:(...e)=>n(console.log,...e),warn:(...e)=>n(console.warn,...e),error:(...e)=>n(console.error,...e)};let t;try{t=i.main(),t instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw a.error("The background crashed on startup!"),e}return t})();
